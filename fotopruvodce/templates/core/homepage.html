{% extends "base.html" %}

{% load photos %}
{% load discussion %}
{% load text_extras %}

{% block content %}
    <div id="latest-photos" class="clear">
        <h2>Poslední fotky</h2>
        {% get_latest_photos count=3 as latest_photos %}
        {% if latest_photos %}
        <ul>
            {% for photo in latest_photos %}
            <li>
                <div class="img"><a href="{{ photo.get_absolute_url }}"><img src="{{ photo.thumbnail.url }}"></a></div>
                <div class="desc">{{ photo.title|striptags }}</div>
            </li>
            {% endfor %}
        </ul>
        {% endif %}
    </div>

    <div id="latest-photos-comments" class="clear">
        <h2>Poslední komentáře fotek</h2>
        {% get_latest_photos_comments count=5 as latest_photos_comments %}
        {% if latest_photos_comments %}
        <ul>
            {% for comment in latest_photos_comments %}
                <li>
                    <a href="{{ comment.photo.get_absolute_url }}">{{ comment.photo.title|striptags }}</a>
                    (<span class="author">{{ comment.user.username }}</span> {{ comment.timestamp|date:'d.m.Y H:i:s' }}
                    {{ comment.content|raw_text_to_html|striptags|truncatewords:10 }})
                </li>
            {% endfor %}
        </ul>
        {% endif %}
    </div>

    <div id="latest-comments" class="clear">
        <h2>Poslední komentáře ve Fotofóru</h2>
        {% get_latest_comments count=5 as latest_comments %}
        {% if latest_comments %}
        <ul>
            {% for comment in latest_comments %}
                <li>
                    <a href="{{ comment.get_absolute_url }}">{{ comment.title|striptags }}</a>
                    (<span class="author">{{ comment.user.username }}</span> {{ comment.timestamp|date:'d.m.Y H:i:s' }})
                </li>
            {% endfor %}
        </ul>
        {% endif %}
    </div>
{% endblock %}
